type: custom:apexcharts-card
graph_span: 27h
experimental:
  color_threshold: true
update_interval: 15m
header:
  title: Strømpris i dag og i morgen
  show: true
  colorize_states: true
  standard_format: true
apex_config:
  yaxis:
    min: 0
    opposite: true
  chart:
    stacked: true
hours_12: false
cache: true
span:
  start: hour
  offset: '-3h'
now:
  show: true
  label: Now
series:
  - entity: sensor.nordpool_kwh_oslo_nok_3_10_025
    type: column
    name: Strømpris
    stroke_width: 3
    show:
      legend_value: true
      extremas: true
    data_generator: |
      return (entity.attributes.raw_today.map((start, index) => {
        return [new Date(start["start"]).getTime(), entity.attributes.raw_today[index]["value"]];
      })).concat(entity.attributes.raw_tomorrow.map((start, index) => {
        return [new Date(start["start"]).getTime(), entity.attributes.raw_tomorrow[index]["value"]];
      }));
    color_threshold:
      - value: 0
        color: blue
      - value: 0.2
        color: green
      - value: 0.4
        color: green
      - value: 0.6
        color: yellow
      - value: 0.8
        color: yellow
      - value: 1
        color: orange
      - value: 1.2
        color: orange
      - value: 1.4
        color: red
      - value: 1.6
        color: red
